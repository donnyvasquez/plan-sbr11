<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Plan Saber 11 â€“ Checklist (12 semanas)</title>
<meta name="description" content="Checklist interactivo para preparar Saber 11. Guarda progreso en localStorage y permite exportar/importar." />
<style>
  :root{
    --bg:#ffffff;--fg:#111827;--muted:#6b7280;--border:#e5e7eb;--chip:#f3f4f6;--brand:#111827;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:var(--bg);color:var(--fg);}
  header{position:sticky;top:0;z-index:10;background:rgba(255,255,255,.9);backdrop-filter:saturate(150%) blur(6px);border-bottom:1px solid var(--border)}
  .container{max-width:960px;margin:0 auto;padding:16px}
  .row{display:flex;gap:12px;align-items:center}
  h1{font-size:20px;margin:0;font-weight:600}
  .btn{appearance:none;border:1px solid var(--border);background:#fff;border-radius:999px;padding:8px 12px;font-size:14px;cursor:pointer;display:inline-flex;gap:8px;align-items:center}
  .btn:hover{box-shadow:0 1px 0 rgba(17,24,39,.08)}
  .bar{width:100%;height:12px;background:#f3f4f6;border-radius:999px;overflow:hidden}
  .bar>div{height:100%;background:var(--brand);width:0}
  .muted{color:var(--muted)}
  main{padding:24px 16px}
  section.card{border:1px solid var(--border);border-radius:16px;padding:16px}
  .grid{display:grid;gap:12px}
  @media(min-width:640px){.grid-2{grid-template-columns:repeat(2,1fr)}}
  .week-title{font-weight:600}
  .week-actions{display:flex;gap:8px}
  .checkbox{width:20px;height:20px}
  .chip{display:flex;gap:12px;align-items:center;border:1px solid var(--border);border-radius:12px;padding:12px;background:var(--chip)}
  footer{color:var(--muted);padding-bottom:48px}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  /* Print */
  @media print{header,.controls{display:none} section.card{break-inside:avoid}}
</style>
</head>
<body>
<header>
  <div class="container">
    <div class="row">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10Zm-1.5-6.5 7-7-1.414-1.414L10.5 12.672 7.914 10.086 6.5 11.5l4 4Z" fill="currentColor"/></svg>
      <h1>Plan Saber 11 â€“ Checklist (12 semanas)</h1>
      <div class="row" style="margin-left:auto">
        <button class="btn" id="btn-reset" title="Reiniciar progreso">â†º Reiniciar</button>
        <button class="btn" id="btn-export" title="Exportar JSON">â¬‡ï¸ Exportar</button>
        <label class="btn" title="Importar JSON" style="cursor:pointer">â¬†ï¸ Importar
          <input id="file-import" type="file" accept="application/json" class="sr-only" />
        </label>
      </div>
    </div>
    <div class="container" style="padding-top:8px">
      <div class="bar" aria-label="Barra de progreso"><div id="bar-fill"></div></div>
      <div class="row" style="justify-content:space-between;margin-top:6px">
        <p class="muted" id="txt-progress">Progreso total: 0%</p>
        <p class="muted" id="txt-saved">Sin guardado aÃºn</p>
      </div>
    </div>
  </div>
</header>

<main class="container grid">
  <section class="card">
    <h2 style="margin-top:0;font-size:18px" class="week-title">Momentos del simulacro (formato dÃ­a real)</h2>
    <div class="grid grid-2">
      <div class="chip"><span>ğŸ“…</span><div><div style="font-weight:600">SesiÃ³n AM</div><div class="muted">ğŸ•’ 07:30â€“11:30</div></div></div>
      <div class="chip"><span>ğŸ“…</span><div><div style="font-weight:600">SesiÃ³n PM</div><div class="muted">ğŸ•’ 13:00â€“17:00</div></div></div>
    </div>
    <p class="muted" style="margin-top:8px">Reproduce condiciones reales: sin celular, agua/snack, mesa cÃ³moda.</p>
  </section>

  <div id="weeks" class="grid" style="gap:16px"></div>

  <section class="card">
    <h3 style="margin-top:0" class="week-title">Plantillas rÃ¡pidas</h3>
    <div class="grid grid-2">
      <div class="chip"><div>
        <div style="font-weight:600">BitÃ¡cora de errores</div>
        <div class="muted">Fecha | Ãrea | Competencia | Ãtem | Mi error | Regla | CÃ³mo evitarlo</div>
      </div></div>
      <div class="chip"><div>
        <div style="font-weight:600">KPI por simulacro</div>
        <div class="muted">ER% AM/PM, tiempo sobrante, puntaje estimado, nota UdeC (â‰ˆ ICFES/5)</div>
      </div></div>
      <div class="chip"><div>
        <div style="font-weight:600">Agenda semanal</div>
        <div class="muted">SesiÃ³n A (60â€™), SesiÃ³n B (60â€™), RevisiÃ³n (15â€“25â€™), Ãtems totales</div>
      </div></div>
    </div>
  </section>

  <footer class="muted">Hecho con â¤ para tu preparaciÃ³n Saber 11. Progreso guardado en tu navegador (localStorage). Exporta/Importa para compartir.</footer>
</main>

<script>
(function(){
  const STORAGE_BASE = 'saber11_plan_progress_v1';
  const urlId = (()=>{ try { return new URLSearchParams(location.search).get('id') || 'default'; } catch(e){ return 'default'; } })();
  const STORAGE_KEY = `${STORAGE_BASE}::${location.host}${location.pathname}::${urlId}`;

  const PLAN = [
    { id:'w0', title:'Semana 0 â€“ DiagnÃ³stico y Setup', tasks:[
      'Simulacro diagnÃ³stico completo (AM + PM)',
      'Clasificar errores por competencia (bitÃ¡cora)',
      'Microciclos de refuerzo: Lectura y MatemÃ¡ticas (3â€“4 sesiones)',
      'Descanso activo: lectura ligera'
    ], simulacro:{ampm:true, label:'Simulacro #0 (DiagnÃ³stico)'} },
    { id:'w1', title:'Semana 1 â€“ Base LECTURA + MATES', tasks:[
      'Lectura: inferencias, propÃ³sito, conectores (2â€“3 sesiones)',
      'MatemÃ¡ticas: proporciones, razones, porcentajes (2â€“3 sesiones)',
      'BitÃ¡cora de errores actualizada'
    ] },
    { id:'w2', title:'Semana 2 â€“ Base LECTURA + MATES', tasks:[
      'Lectura: argumentaciÃ³n y evidencia',
      'MatemÃ¡ticas: lectura de funciones (tabla/grÃ¡fica)',
      'RevisiÃ³n de errores de la semana'
    ], simulacro:{ampm:true, label:'Simulacro #1 (fin de semana)'} },
    { id:'w3', title:'Semana 3 â€“ Entran NATURALES + SOCIALES', tasks:[
      'Naturales: interpretar experimentos y grÃ¡ficas (energÃ­a/materia)',
      'MatemÃ¡ticas: estadÃ­stica bÃ¡sica y conteo',
      'Lectura: evidencia vs. opiniÃ³n'
    ] },
    { id:'w4', title:'Semana 4 â€“ NATURALES + SOCIALES', tasks:[
      'Naturales: relaciones causaâ€“efecto, hipÃ³tesis/predicciÃ³n',
      'MatemÃ¡ticas: problemas multiâ€‘paso',
      'RevisiÃ³n de errores + bitÃ¡cora'
    ], simulacro:{ampm:true, label:'Simulacro #2 (fin de semana)'} },
    { id:'w5', title:'Semana 5 â€“ ConsolidaciÃ³n y velocidad', tasks:[
      'Sociales: tablas, mapas, lectura cÃ­vica',
      'MatemÃ¡ticas: mezcla de Ã¡reas (velocidad + exactitud)',
      'Lectura: textos largos y administraciÃ³n del tiempo'
    ] },
    { id:'w6', title:'Semana 6 â€“ ConsolidaciÃ³n y velocidad', tasks:[
      'MatemÃ¡ticas: trampas tÃ­picas y control de errores',
      'Lectura: manejo de preguntas difÃ­ciles',
      'RevisiÃ³n de tiempos por cuadernillo'
    ], simulacro:{ampm:true, label:'Simulacro #3 (fin de semana)'} },
    { id:'w7', title:'Semana 7 â€“ Afinamiento tÃ©cnico', tasks:[
      'Naturales: anÃ¡lisis de datos (tablas/grÃ¡ficas)',
      'MatemÃ¡ticas: Ã­tems de alta discriminaciÃ³n',
      'InglÃ©s: lectura B1, cloze, tiempos verbales'
    ] },
    { id:'w8', title:'Semana 8 â€“ Afinamiento tÃ©cnico', tasks:[
      'Naturales: chequeo de conceptos base',
      'MatemÃ¡ticas: funciones y proporciones (repaso rÃ¡pido)',
      'RevisiÃ³n de errores crÃ­ticos'
    ], simulacro:{ampm:true, label:'Simulacro #4 (fin de semana)'} },
    { id:'w9', title:'Semana 9 â€“ Ensayo general (fatiga controlada)', tasks:[
      'Simulacro #5 (MiÃ©rcoles) AM + PM',
      'Simulacro #6 (Jueves) AM + PM',
      'RevisiÃ³n ligera + tarjetas de error (Viernes)',
      'Descanso activo Saâ€“Do'
    ], simulacro:{ampm:false, label:'Semana con 2 simulacros completos'} },
    { id:'w10', title:'Semana 10 â€“ Taper (bajar carga)', tasks:[
      'Bloques cortos por competencia (Luâ€“Mi)',
      'Simulacro #7 (Jueves) AM + PM',
      'HÃ¡bitos: sueÃ±o, hidrataciÃ³n, cero temas nuevos'
    ], simulacro:{ampm:true, label:'Simulacro #7 (Jueves)'} },
    { id:'w11', title:'Semana 11 â€“ Semana del examen', tasks:[
      'Mantenimiento suave 45â€“60â€™ diarios (Luâ€“Mi)',
      'LogÃ­stica: documentos, transporte, snacks (Jueves)',
      'Descanso total (Viernes)'
    ] },
    { id:'w12', title:'Semana 12 â€“ (Opcional) Segundo intento', tasks:[
      'Si quedaste 360â€“400: sostener ritmo 4â€“6 semanas',
      'Reinscribirse al siguiente calendario (A/B)',
      'Ajustar plan segÃºn bitÃ¡cora de errores'
    ] }
  ];

  // ---- Storage helpers ----
  const load = () => { try { const raw = localStorage.getItem(STORAGE_KEY); return raw? JSON.parse(raw): {}; } catch(e){ return {}; } };
  const save = (state) => { try { localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); localStorage.setItem(STORAGE_KEY+'__ts', String(Date.now())); } catch(e){} };
  const loadTs = () => { try { const ts = localStorage.getItem(STORAGE_KEY+'__ts'); return ts? new Date(parseInt(ts,10)): null; } catch(e){ return null; } };

  // ---- State ----
  let state = load();

  // ---- DOM refs ----
  const weeksRoot = document.getElementById('weeks');
  const barFill = document.getElementById('bar-fill');
  const txtProgress = document.getElementById('txt-progress');
  const txtSaved = document.getElementById('txt-saved');

  // ---- Render helpers ----
  function checkbox(id, checked, label, onChange){
    const li = document.createElement('li');
    li.className = 'row';
    const input = document.createElement('input');
    input.type = 'checkbox';
    input.className = 'checkbox';
    input.id = id;
    input.checked = !!checked;
    input.addEventListener('change', onChange);
    const lab = document.createElement('label');
    lab.htmlFor = id; lab.textContent = label; lab.style.cursor = 'pointer';
    lab.style.userSelect = 'none';
    li.appendChild(input); li.appendChild(lab);
    return li;
  }

  function render(){
    weeksRoot.innerHTML = '';
    let total = 0, done = 0;

    PLAN.forEach(week =>{
      const card = document.createElement('section');
      card.className = 'card';

      const head = document.createElement('div');
      head.className = 'row';
      const h3 = document.createElement('h3'); h3.textContent = week.title; h3.className = 'week-title'; h3.style.margin='0';
      const actions = document.createElement('div'); actions.className='week-actions';
      const btnAll = document.createElement('button'); btnAll.className='btn'; btnAll.textContent='Marcar semana';
      const btnNone = document.createElement('button'); btnNone.className='btn'; btnNone.textContent='Desmarcar';
      actions.append(btnAll, btnNone);
      head.append(h3, actions);

      const ul = document.createElement('ul'); ul.className='grid';

      // tasks
      week.tasks.forEach((t,idx)=>{
        total += 1;
        const key = 't'+idx;
        const checked = state?.[week.id]?.[key];
        const li = checkbox(`${week.id}-${key}`, checked, t, ()=>{
          state[week.id] = state[week.id] || {}; state[week.id][key] = !state[week.id][key];
          save(state); updateMeta();
        });
        if(checked) done += 1;
        ul.appendChild(li);
      });

      // simulacros AM/PM
      if(week.simulacro && week.simulacro.ampm){
        total += 2;
        const box = document.createElement('div'); box.className='card'; box.style.marginTop='12px';
        const title = document.createElement('div'); title.textContent = week.simulacro.label; title.style.fontWeight='600'; title.style.marginBottom='8px';
        const grid = document.createElement('div'); grid.className='grid grid-2';
        const am = checkbox(`${week.id}-simAM`, state?.[week.id]?.simAM, 'SesiÃ³n AM (07:30â€“11:30)', ()=>{ state[week.id]=state[week.id]||{}; state[week.id].simAM = !state[week.id].simAM; save(state); updateMeta(); });
        const pm = checkbox(`${week.id}-simPM`, state?.[week.id]?.simPM, 'SesiÃ³n PM (13:00â€“17:00)', ()=>{ state[week.id]=state[week.id]||{}; state[week.id].simPM = !state[week.id].simPM; save(state); updateMeta(); });
        if(state?.[week.id]?.simAM) done += 1; if(state?.[week.id]?.simPM) done += 1;
        grid.append(am, pm); box.append(title, grid);
        const tip = document.createElement('p'); tip.className='muted'; tip.style.marginTop='8px'; tip.textContent = 'DespuÃ©s: revisa SOLO errores y preguntas dudadas; actualiza bitÃ¡cora y KPIs.';
        box.appendChild(tip);
        card.appendChild(box);
      } else if (week.simulacro){
        const box = document.createElement('div'); box.className='card'; box.style.marginTop='12px';
        const title = document.createElement('div'); title.textContent = week.simulacro.label; title.style.fontWeight='600';
        const tip = document.createElement('p'); tip.className='muted'; tip.textContent = 'Recuerda registrar resultados por cuadernillo y tiempos.';
        box.append(title, tip); card.appendChild(box);
      }

      // mark all/none handlers
      btnAll.addEventListener('click', ()=>{ state[week.id]=state[week.id]||{}; week.tasks.forEach((_,i)=> state[week.id]['t'+i]=true); if(week.simulacro?.ampm){state[week.id].simAM=true; state[week.id].simPM=true;} save(state); render(); updateMeta(); });
      btnNone.addEventListener('click', ()=>{ state[week.id]=state[week.id]||{}; week.tasks.forEach((_,i)=> state[week.id]['t'+i]=false); if(week.simulacro?.ampm){state[week.id].simAM=false; state[week.id].simPM=false;} save(state); render(); updateMeta(); });

      card.append(head, ul);
      weeksRoot.appendChild(card);
    });

    // update progress
    const pct = Math.round((done/total)*100) || 0;
    barFill.style.width = pct + '%';
    txtProgress.textContent = `Progreso total: ${pct}% (${done}/${total} checks)`;
  }

  function updateMeta(){
    const ts = loadTs();
    if(ts){ txtSaved.textContent = 'Guardado: ' + ts.toLocaleString(); } else { txtSaved.textContent = 'Sin guardado aÃºn'; }
  }

  // Controls
  document.getElementById('btn-reset').addEventListener('click', ()=>{
    if(confirm('Â¿Reiniciar todos los checks?')){ state = {}; save(state); render(); updateMeta(); }
  });
  document.getElementById('btn-export').addEventListener('click', ()=>{
    const blob = new Blob([JSON.stringify(state,null,2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href=url; a.download='progreso_saber11.json'; a.click(); setTimeout(()=>URL.revokeObjectURL(url), 500);
  });
  document.getElementById('file-import').addEventListener('change', (e)=>{
    const file = e.target.files && e.target.files[0]; if(!file) return;
    const reader = new FileReader();
    reader.onload = ()=>{ try{ state = JSON.parse(String(reader.result)); save(state); render(); updateMeta(); }catch(err){ alert('Archivo invÃ¡lido'); } };
    reader.readAsText(file);
  });

  // First render
  render();
  updateMeta();
})();
</script>
</body>
</html>
